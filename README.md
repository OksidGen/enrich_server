# Person Enrichment Service

Person Enrichment Service - это сервис, написанный на языке программирования Go, предназначенный для получения, обогащения и управления данными о людях.

## Функциональность

- Получение данных о человеке с внешних API.
- Обогащение данных о человеке информацией о возрасте, поле и национальности с использованием внешних API.
- Сохранение обогащенных данных в базе данных PostgreSQL.
- Методы для получения, удаления, изменения и добавления записей в базе данных.
- Возможность фильтрации и пагинации при запросе списка людей.

## Использованные технологии

- Go (Golang)
- Echo - веб-фреймворк для создания HTTP-серверов
- PostgreSQL - реляционная база данных
- sqlx - библиотека для работы с базой данных в Go
- pgx - драйвер PostgreSQL для Go
- zerolog - логгер

## Установка и запуск

1. Склонируйте репозиторий:

   ```bash
   git clone https://github.com/OksidGen/enrich_server.git
   cd enrich_server
   ```

2. Зависимости для проекта указаны в файле `go.mod`. Вы можете установить их с помощью команды:

```bash
go mod download
```

3. Настройте переменные окружения в файле `.env`. Пример в `.env.example`.

4. Запустите приложение:

   ```bash
   go run main.go
   ```

5. Приложение будет доступно по адресу [http://localhost:8080](http://localhost:8080).

## API Методы

- **Получение списка людей с фильтрами и пагинацией:**
  - Метод: `GET`
  - Путь: `/people`
  - Параметры запроса:
    - `name`, `surname`, `patronymic`, `gender`, `nationality` - фильтры по имени, фамилии, отчеству, полу, национальности
    - `age`, `minAge`, `maxAge` - фильтры по возрасту
    - `page` и `limit` - параметры пагинации

- **Добавление нового человека:**
  - Метод: `POST`
  - Путь: `/people`
  - Тело запроса:
    ```json
    {
      "name": "Dmitriy",
      "surname": "Ushakov",
      "patronymic": "Vasilevich" // необязательно
    }
    ```

- **Обновление данных человека по идентификатору:**
  - Метод: `PUT`
  - Путь: `/people/:id`
  - Тело запроса:
    ```json
    {
      "field": "value"
    }
    ```

- **Удаление человека по идентификатору:**
  - Метод: `DELETE`
  - Путь: `/people/:id`

## Обогащение данных

Данные о возрасте, поле и национальности обогащаются из следующих внешних API:
- Возраст: [Agify API](https://api.agify.io/)
- Пол: [Genderize API](https://api.genderize.io/)
- Национальность: [Nationalize API](https://api.nationalize.io/)
